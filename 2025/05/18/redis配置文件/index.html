<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>redis的配置文件 | 醉流的神秘博客</title><meta name="author" content="ZuiLiu"><meta name="copyright" content="ZuiLiu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Redis的配置文件位于安装路径的根目录上，全名为redis.conf  可以使用vim（Linux）或者双击（Windows）打开配置文件 当然配置文件里面注释较多，使用vim并不方便，可以使用这种格式的GET指令 1redis 127.0.0.1:6379&gt; CONFIG GET CONFIG_SETTING_NAME  使用 1CONFIG GET *  来获取所有的配置项目。  1C">
<meta property="og:type" content="article">
<meta property="og:title" content="redis的配置文件">
<meta property="og:url" content="https://zuiliuab.github.io/2025/05/18/redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/index.html">
<meta property="og:site_name" content="醉流的神秘博客">
<meta property="og:description" content="Redis的配置文件位于安装路径的根目录上，全名为redis.conf  可以使用vim（Linux）或者双击（Windows）打开配置文件 当然配置文件里面注释较多，使用vim并不方便，可以使用这种格式的GET指令 1redis 127.0.0.1:6379&gt; CONFIG GET CONFIG_SETTING_NAME  使用 1CONFIG GET *  来获取所有的配置项目。  1C">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic.crazytaxii.com/Redis_Logo.png">
<meta property="article:published_time" content="2025-05-17T16:00:00.000Z">
<meta property="article:modified_time" content="2025-05-17T15:39:23.224Z">
<meta property="article:author" content="ZuiLiu">
<meta property="article:tag" content="redis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.crazytaxii.com/Redis_Logo.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "redis的配置文件",
  "url": "https://zuiliuab.github.io/2025/05/18/redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/",
  "image": "https://pic.crazytaxii.com/Redis_Logo.png",
  "datePublished": "2025-05-17T16:00:00.000Z",
  "dateModified": "2025-05-17T15:39:23.224Z",
  "author": [
    {
      "@type": "Person",
      "name": "ZuiLiu",
      "url": "https://zuiliuab.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="https://img.picui.cn/free/2025/05/05/6818d9a8b7916.ico"><link rel="canonical" href="https://zuiliuab.github.io/2025/05/18/redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'redis的配置文件',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(url(https://file.51pptmoban.com/d/file/2022/09/22/a3169522af91c56dab1bb46900e26786.jpg));"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://bbs.mcrail.top/media/d5a8ebf1-1b7c-483e-84e2-8452b7cb786a/new.gif" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://pic.crazytaxii.com/Redis_Logo.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">醉流的神秘博客</span></a><a class="nav-page-title" href="/"><span class="site-name">redis的配置文件</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">redis的配置文件<a class="post-edit-link" href="null_posts/redis配置文件.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-05-17T16:00:00.000Z" title="发表于 2025-05-18 00:00:00">2025-05-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-05-17T15:39:23.224Z" title="更新于 2025-05-17 23:39:23">2025-05-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">基础知识</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/redis/">redis</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;已經過了&quot;,&quot;messageNext&quot;:&quot;天自上次更新，文章內容可能已過時。&quot;,&quot;postUpdate&quot;:&quot;2025-05-17 23:39:23&quot;}" hidden></div><h3 id="Redis的配置文件"><a href="#Redis的配置文件" class="headerlink" title="Redis的配置文件"></a>Redis的配置文件</h3><p>位于安装路径的根目录上，全名为redis.conf </p>
<p>可以使用vim（Linux）或者双击（Windows）打开配置文件</p>
<p>当然配置文件里面注释较多，使用vim并不方便，可以使用这种格式的GET指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; CONFIG GET CONFIG_SETTING_NAME</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CONFIG GET *</span><br></pre></td></tr></table></figure>

<p>来获取所有的配置项目。</p>
<p><img src="https://img.picui.cn/free/2025/05/17/6828a27a717c8.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CONFIG GET PORT</span><br></pre></td></tr></table></figure>

<p><img src="https://img.picui.cn/free/2025/05/17/6828a30728621.png" alt="1747493643233.png"></p>
<p>当然了，既然有GET方法，也会有SET方法，使用SET指令来对配置进行修改</p>
<p>格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE</span><br></pre></td></tr></table></figure>

<p>比如修改端口为 6666 ，显示OK则修改成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CONFIG SET PORT 6666</span><br></pre></td></tr></table></figure>

<p><img src="https://img.picui.cn/free/2025/05/17/6828a37923c13.png" alt="1747493758524.png"></p>
<h3 id="配置文件解读"><a href="#配置文件解读" class="headerlink" title="配置文件解读"></a>配置文件解读</h3><h4 id="configuration-file"><a href="#configuration-file" class="headerlink" title="configuration file"></a>configuration file</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># Redis configuration file example.</span><br><span class="line">#</span><br><span class="line"># Note that in order to read the configuration file, Redis must be</span><br><span class="line"># started with the file path as first argument:</span><br><span class="line">#</span><br><span class="line"># ./redis-server /path/to/redis.conf</span><br><span class="line"></span><br><span class="line"># Note on units: when memory size is needed, it is possible to specify</span><br><span class="line"># it in the usual form of 1k 5GB 4M and so forth:</span><br><span class="line">#</span><br><span class="line"># 1k =&gt; 1000 bytes</span><br><span class="line"># 1kb =&gt; 1024 bytes</span><br><span class="line"># 1m =&gt; 1000000 bytes</span><br><span class="line"># 1mb =&gt; 1024*1024 bytes</span><br><span class="line"># 1g =&gt; 1000000000 bytes</span><br><span class="line"># 1gb =&gt; 1024*1024*1024 bytes</span><br><span class="line">#</span><br><span class="line"># units are case insensitive so 1GB 1Gb 1gB are all the same.</span><br></pre></td></tr></table></figure>

<p>这段是对于内存使用的解释，不区分大小写</p>
<h4 id="INCLUDES"><a href="#INCLUDES" class="headerlink" title="INCLUDES"></a>INCLUDES</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">################################## INCLUDES ###################################</span><br><span class="line"></span><br><span class="line"># Include one or more other config files here.  This is useful if you</span><br><span class="line"># have a standard template that goes to all Redis servers but also need</span><br><span class="line"># to customize a few per-server settings.  Include files can include</span><br><span class="line"># other files, so use this wisely.</span><br><span class="line">#</span><br><span class="line"># Note that option &quot;include&quot; won&#x27;t be rewritten by command &quot;CONFIG REWRITE&quot;</span><br><span class="line"># from admin or Redis Sentinel. Since Redis always uses the last processed</span><br><span class="line"># line as value of a configuration directive, you&#x27;d better put includes</span><br><span class="line"># at the beginning of this file to avoid overwriting config change at runtime.</span><br><span class="line">#</span><br><span class="line"># If instead you are interested in using includes to override configuration</span><br><span class="line"># options, it is better to use include as the last line.</span><br><span class="line">#</span><br><span class="line"># Included paths may contain wildcards. All files matching the wildcards will</span><br><span class="line"># be included in alphabetical order.</span><br><span class="line"># Note that if an include path contains a wildcards but no files match it when</span><br><span class="line"># the server is started, the include statement will be ignored and no error will</span><br><span class="line"># be emitted.  It is safe, therefore, to include wildcard files from empty</span><br><span class="line"># directories.</span><br><span class="line">#</span><br><span class="line"># include /path/to/local.conf</span><br><span class="line"># include /path/to/other.conf</span><br><span class="line"># include /path/to/fragments/*.conf</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<p>一般来说redis.conf只支持一个配置文件，如果是需要配置多个文件时通过include &#x2F;path&#x2F;to&#x2F;local.conf或者别的名字导入配置，如果将此配置写在redis.conf 文件的开头，那么后面的配置会覆盖引入文件的配置，如果想以引入文件的配置为主，那么需要将 include 配置写在 redis.conf 文件的末尾。</p>
<h4 id="MODULES"><a href="#MODULES" class="headerlink" title="MODULES"></a>MODULES</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">################################## MODULES #####################################</span><br><span class="line"></span><br><span class="line"># Load modules at startup. If the server is not able to load modules</span><br><span class="line"># it will abort. It is possible to use multiple loadmodule directives.</span><br><span class="line">#</span><br><span class="line"># loadmodule /path/to/my_module.so</span><br><span class="line"># loadmodule /path/to/other_module.so</span><br><span class="line"># loadmodule /path/to/args_module.so [arg [arg ...]]</span><br></pre></td></tr></table></figure>

<p>集群功能，使用loadmodule进行新增功能自定义</p>
<h4 id="NETWORK"><a href="#NETWORK" class="headerlink" title="NETWORK"></a>NETWORK</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">################################## NETWORK #####################################</span><br><span class="line"></span><br><span class="line"># By default, if no &quot;bind&quot; configuration directive is specified, Redis listens</span><br><span class="line"># for connections from all available network interfaces on the host machine.</span><br><span class="line"># It is possible to listen to just one or multiple selected interfaces using</span><br><span class="line"># the &quot;bind&quot; configuration directive, followed by one or more IP addresses.</span><br><span class="line"># Each address can be prefixed by &quot;-&quot;, which means that redis will not fail to</span><br><span class="line"># start if the address is not available. Being not available only refers to</span><br><span class="line"># addresses that does not correspond to any network interface. Addresses that</span><br><span class="line"># are already in use will always fail, and unsupported protocols will always BE</span><br><span class="line"># silently skipped.</span><br><span class="line">#</span><br><span class="line"># Examples:</span><br><span class="line">#</span><br><span class="line"># bind 192.168.1.100 10.0.0.1     # listens on two specific IPv4 addresses</span><br><span class="line"># bind 127.0.0.1 ::1              # listens on loopback IPv4 and IPv6</span><br><span class="line"># bind * -::*                     # like the default, all available interfaces</span><br><span class="line">#</span><br><span class="line"># ~~~ WARNING ~~~ If the computer running Redis is directly exposed to the</span><br><span class="line"># internet, binding to all the interfaces is dangerous and will expose the</span><br><span class="line"># instance to everybody on the internet. So by default we uncomment the</span><br><span class="line"># following bind directive, that will force Redis to listen only on the</span><br><span class="line"># IPv4 and IPv6 (if available) loopback interface addresses (this means Redis</span><br><span class="line"># will only be able to accept client connections from the same host that it is</span><br><span class="line"># running on).</span><br><span class="line">#</span><br><span class="line"># IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES</span><br><span class="line"># COMMENT OUT THE FOLLOWING LINE.</span><br><span class="line">#</span><br><span class="line"># You will also need to set a password unless you explicitly disable protected</span><br><span class="line"># mode.</span><br><span class="line"># ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">bind 127.0.0.1 -::1</span><br><span class="line"></span><br><span class="line"># By default, outgoing connections (from replica to master, from Sentinel to</span><br><span class="line"># instances, cluster bus, etc.) are not bound to a specific local address. In</span><br><span class="line"># most cases, this means the operating system will handle that based on routing</span><br><span class="line"># and the interface through which the connection goes out.</span><br><span class="line">#</span><br><span class="line"># Using bind-source-addr it is possible to configure a specific address to bind</span><br><span class="line"># to, which may also affect how the connection gets routed.</span><br><span class="line">#</span><br><span class="line"># Example:</span><br><span class="line">#</span><br><span class="line"># bind-source-addr 10.0.0.1</span><br><span class="line"></span><br><span class="line"># Protected mode is a layer of security protection, in order to avoid that</span><br><span class="line"># Redis instances left open on the internet are accessed and exploited.</span><br><span class="line">#</span><br><span class="line"># When protected mode is on and the default user has no password, the server</span><br><span class="line"># only accepts local connections from the IPv4 address (127.0.0.1), IPv6 address</span><br><span class="line"># (::1) or Unix domain sockets.</span><br><span class="line">#</span><br><span class="line"># By default protected mode is enabled. You should disable it only if</span><br><span class="line"># you are sure you want clients from other hosts to connect to Redis</span><br><span class="line"># even if no authentication is configured.</span><br><span class="line">protected-mode yes</span><br><span class="line"></span><br><span class="line"># Redis uses default hardened security configuration directives to reduce the</span><br><span class="line"># attack surface on innocent users. Therefore, several sensitive configuration</span><br><span class="line"># directives are immutable, and some potentially-dangerous commands are blocked.</span><br><span class="line">#</span><br><span class="line"># Configuration directives that control files that Redis writes to (e.g., &#x27;dir&#x27;</span><br><span class="line"># and &#x27;dbfilename&#x27;) and that aren&#x27;t usually modified during runtime</span><br><span class="line"># are protected by making them immutable.</span><br><span class="line">#</span><br><span class="line"># Commands that can increase the attack surface of Redis and that aren&#x27;t usually</span><br><span class="line"># called by users are blocked by default.</span><br><span class="line">#</span><br><span class="line"># These can be exposed to either all connections or just local ones by setting</span><br><span class="line"># each of the configs listed below to either of these values:</span><br><span class="line">#</span><br><span class="line"># no    - Block for any connection (remain immutable)</span><br><span class="line"># yes   - Allow for any connection (no protection)</span><br><span class="line"># local - Allow only for local connections. Ones originating from the</span><br><span class="line">#         IPv4 address (127.0.0.1), IPv6 address (::1) or Unix domain sockets.</span><br><span class="line">#</span><br><span class="line"># enable-protected-configs no</span><br><span class="line"># enable-debug-command no</span><br><span class="line"># enable-module-command no</span><br><span class="line"></span><br><span class="line"># Accept connections on the specified port, default is 6379 (IANA #815344).</span><br><span class="line"># If port 0 is specified Redis will not listen on a TCP socket.</span><br><span class="line">port 6379</span><br><span class="line"></span><br><span class="line"># TCP listen() backlog.</span><br><span class="line">#</span><br><span class="line"># In high requests-per-second environments you need a high backlog in order</span><br><span class="line"># to avoid slow clients connection issues. Note that the Linux kernel</span><br><span class="line"># will silently truncate it to the value of /proc/sys/net/core/somaxconn so</span><br><span class="line"># make sure to raise both the value of somaxconn and tcp_max_syn_backlog</span><br><span class="line"># in order to get the desired effect.</span><br><span class="line">tcp-backlog 511</span><br><span class="line"></span><br><span class="line"># Unix socket.</span><br><span class="line">#</span><br><span class="line"># Specify the path for the Unix socket that will be used to listen for</span><br><span class="line"># incoming connections. There is no default, so Redis will not listen</span><br><span class="line"># on a unix socket when not specified.</span><br><span class="line">#</span><br><span class="line"># unixsocket /run/redis.sock</span><br><span class="line"># unixsocketperm 700</span><br><span class="line"></span><br><span class="line"># Close the connection after a client is idle for N seconds (0 to disable)</span><br><span class="line">timeout 0</span><br><span class="line"></span><br><span class="line"># TCP keepalive.</span><br><span class="line">#</span><br><span class="line"># If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence</span><br><span class="line"># of communication. This is useful for two reasons:</span><br><span class="line">#</span><br><span class="line"># 1) Detect dead peers.</span><br><span class="line"># 2) Force network equipment in the middle to consider the connection to be</span><br><span class="line">#    alive.</span><br><span class="line">#</span><br><span class="line"># On Linux, the specified value (in seconds) is the period used to send ACKs.</span><br><span class="line"># Note that to close the connection the double of the time is needed.</span><br><span class="line"># On other kernels the period depends on the kernel configuration.</span><br><span class="line">#</span><br><span class="line"># A reasonable value for this option is 300 seconds, which is the new</span><br><span class="line"># Redis default starting with Redis 3.2.1.</span><br><span class="line">tcp-keepalive 300</span><br><span class="line"></span><br><span class="line"># Apply OS-specific mechanism to mark the listening socket with the specified</span><br><span class="line"># ID, to support advanced routing and filtering capabilities.</span><br><span class="line">#</span><br><span class="line"># On Linux, the ID represents a connection mark.</span><br><span class="line"># On FreeBSD, the ID represents a socket cookie ID.</span><br><span class="line"># On OpenBSD, the ID represents a route table ID.</span><br><span class="line">#</span><br><span class="line"># The default value is 0, which implies no marking is required.</span><br><span class="line"># socket-mark-id 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>bind：绑定IP，一般是127.0.0.1，如果注释掉或者留空则会接受所有网络的链接请求</p>
<p>bind-source-addr : 一般由路由决定</p>
<p>protected-mode  :  这是一种安全保护层，防止开放在互联网上的Redis实例被未经授权地访问和利用。当保护模式开启且默认用户没有密码时，服务器仅接受来自本地回环地址的连接。默认启用，只有在确认需要从其他主机连接到Redis且不配置认证的情况下才应禁用。</p>
<p>port：端口，一般指服务器运行端口，默认是6379，可以修改，舒适的一点是当你开启多个redis服务时会redis自动修改端口</p>
<p>TCP keepalive ： 检测死对等体并保持连接活跃。</p>
<p>socket-mark-id ： 应用操作系统特定机制为监听套接字指定ID，支持高级路由和过滤能力。默认值为0。</p>
<h4 id="TLS-SSL"><a href="#TLS-SSL" class="headerlink" title="TLS&#x2F;SSL"></a>TLS&#x2F;SSL</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">################################# TLS/SSL #####################################</span><br><span class="line"></span><br><span class="line"># By default, TLS/SSL is disabled. To enable it, the &quot;tls-port&quot; configuration</span><br><span class="line"># directive can be used to define TLS-listening ports. To enable TLS on the</span><br><span class="line"># default port, use:</span><br><span class="line">#</span><br><span class="line"># port 0</span><br><span class="line"># tls-port 6379</span><br><span class="line"></span><br><span class="line"># Configure a X.509 certificate and private key to use for authenticating the</span><br><span class="line"># server to connected clients, masters or cluster peers.  These files should be</span><br><span class="line"># PEM formatted.</span><br><span class="line">#</span><br><span class="line"># tls-cert-file redis.crt</span><br><span class="line"># tls-key-file redis.key</span><br><span class="line">#</span><br><span class="line"># If the key file is encrypted using a passphrase, it can be included here</span><br><span class="line"># as well.</span><br><span class="line">#</span><br><span class="line"># tls-key-file-pass secret</span><br><span class="line"></span><br><span class="line"># Normally Redis uses the same certificate for both server functions (accepting</span><br><span class="line"># connections) and client functions (replicating from a master, establishing</span><br><span class="line"># cluster bus connections, etc.).</span><br><span class="line">#</span><br><span class="line"># Sometimes certificates are issued with attributes that designate them as</span><br><span class="line"># client-only or server-only certificates. In that case it may be desired to use</span><br><span class="line"># different certificates for incoming (server) and outgoing (client)</span><br><span class="line"># connections. To do that, use the following directives:</span><br><span class="line">#</span><br><span class="line"># tls-client-cert-file client.crt</span><br><span class="line"># tls-client-key-file client.key</span><br><span class="line">#</span><br><span class="line"># If the key file is encrypted using a passphrase, it can be included here</span><br><span class="line"># as well.</span><br><span class="line">#</span><br><span class="line"># tls-client-key-file-pass secret</span><br><span class="line"></span><br><span class="line"># Configure a DH parameters file to enable Diffie-Hellman (DH) key exchange,</span><br><span class="line"># required by older versions of OpenSSL (&lt;3.0). Newer versions do not require</span><br><span class="line"># this configuration and recommend against it.</span><br><span class="line">#</span><br><span class="line"># tls-dh-params-file redis.dh</span><br><span class="line"></span><br><span class="line"># Configure a CA certificate(s) bundle or directory to authenticate TLS/SSL</span><br><span class="line"># clients and peers.  Redis requires an explicit configuration of at least one</span><br><span class="line"># of these, and will not implicitly use the system wide configuration.</span><br><span class="line">#</span><br><span class="line"># tls-ca-cert-file ca.crt</span><br><span class="line"># tls-ca-cert-dir /etc/ssl/certs</span><br><span class="line"></span><br><span class="line"># By default, clients (including replica servers) on a TLS port are required</span><br><span class="line"># to authenticate using valid client side certificates.</span><br><span class="line">#</span><br><span class="line"># If &quot;no&quot; is specified, client certificates are not required and not accepted.</span><br><span class="line"># If &quot;optional&quot; is specified, client certificates are accepted and must be</span><br><span class="line"># valid if provided, but are not required.</span><br><span class="line">#</span><br><span class="line"># tls-auth-clients no</span><br><span class="line"># tls-auth-clients optional</span><br><span class="line"></span><br><span class="line"># By default, a Redis replica does not attempt to establish a TLS connection</span><br><span class="line"># with its master.</span><br><span class="line">#</span><br><span class="line"># Use the following directive to enable TLS on replication links.</span><br><span class="line">#</span><br><span class="line"># tls-replication yes</span><br><span class="line"></span><br><span class="line"># By default, the Redis Cluster bus uses a plain TCP connection. To enable</span><br><span class="line"># TLS for the bus protocol, use the following directive:</span><br><span class="line">#</span><br><span class="line"># tls-cluster yes</span><br><span class="line"></span><br><span class="line"># By default, only TLSv1.2 and TLSv1.3 are enabled and it is highly recommended</span><br><span class="line"># that older formally deprecated versions are kept disabled to reduce the attack surface.</span><br><span class="line"># You can explicitly specify TLS versions to support.</span><br><span class="line"># Allowed values are case insensitive and include &quot;TLSv1&quot;, &quot;TLSv1.1&quot;, &quot;TLSv1.2&quot;,</span><br><span class="line"># &quot;TLSv1.3&quot; (OpenSSL &gt;= 1.1.1) or any combination.</span><br><span class="line"># To enable only TLSv1.2 and TLSv1.3, use:</span><br><span class="line">#</span><br><span class="line"># tls-protocols &quot;TLSv1.2 TLSv1.3&quot;</span><br><span class="line"></span><br><span class="line"># Configure allowed ciphers.  See the ciphers(1ssl) manpage for more information</span><br><span class="line"># about the syntax of this string.</span><br><span class="line">#</span><br><span class="line"># Note: this configuration applies only to &lt;= TLSv1.2.</span><br><span class="line">#</span><br><span class="line"># tls-ciphers DEFAULT:!MEDIUM</span><br><span class="line"></span><br><span class="line"># Configure allowed TLSv1.3 ciphersuites.  See the ciphers(1ssl) manpage for more</span><br><span class="line"># information about the syntax of this string, and specifically for TLSv1.3</span><br><span class="line"># ciphersuites.</span><br><span class="line">#</span><br><span class="line"># tls-ciphersuites TLS_CHACHA20_POLY1305_SHA256</span><br><span class="line"></span><br><span class="line"># When choosing a cipher, use the server&#x27;s preference instead of the client</span><br><span class="line"># preference. By default, the server follows the client&#x27;s preference.</span><br><span class="line">#</span><br><span class="line"># tls-prefer-server-ciphers yes</span><br><span class="line"></span><br><span class="line"># By default, TLS session caching is enabled to allow faster and less expensive</span><br><span class="line"># reconnections by clients that support it. Use the following directive to disable</span><br><span class="line"># caching.</span><br><span class="line">#</span><br><span class="line"># tls-session-caching no</span><br><span class="line"></span><br><span class="line"># Change the default number of TLS sessions cached. A zero value sets the cache</span><br><span class="line"># to unlimited size. The default size is 20480.</span><br><span class="line">#</span><br><span class="line"># tls-session-cache-size 5000</span><br><span class="line"></span><br><span class="line"># Change the default timeout of cached TLS sessions. The default timeout is 300</span><br><span class="line"># seconds.</span><br><span class="line">#</span><br><span class="line"># tls-session-cache-timeout 60</span><br></pre></td></tr></table></figure>

<p>Redis 6.0 以上新增的功能，多用于通信与数据加密的证书配置，在高并发场景下，加密解密操作可能会带来额外的CPU开销。</p>
<h4 id="GENERAL"><a href="#GENERAL" class="headerlink" title="GENERAL"></a>GENERAL</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">################################# GENERAL #####################################</span><br><span class="line"></span><br><span class="line"># By default Redis does not run as a daemon. Use &#x27;yes&#x27; if you need it.</span><br><span class="line"># Note that Redis will write a pid file in /var/run/redis.pid when daemonized.</span><br><span class="line"># When Redis is supervised by upstart or systemd, this parameter has no impact.</span><br><span class="line">daemonize no</span><br><span class="line"></span><br><span class="line"># If you run Redis from upstart or systemd, Redis can interact with your</span><br><span class="line"># supervision tree. Options:</span><br><span class="line">#   supervised no      - no supervision interaction</span><br><span class="line">#   supervised upstart - signal upstart by putting Redis into SIGSTOP mode</span><br><span class="line">#                        requires &quot;expect stop&quot; in your upstart job config</span><br><span class="line">#   supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET</span><br><span class="line">#                        on startup, and updating Redis status on a regular</span><br><span class="line">#                        basis.</span><br><span class="line">#   supervised auto    - detect upstart or systemd method based on</span><br><span class="line">#                        UPSTART_JOB or NOTIFY_SOCKET environment variables</span><br><span class="line"># Note: these supervision methods only signal &quot;process is ready.&quot;</span><br><span class="line">#       They do not enable continuous pings back to your supervisor.</span><br><span class="line">#</span><br><span class="line"># The default is &quot;no&quot;. To run under upstart/systemd, you can simply uncomment</span><br><span class="line"># the line below:</span><br><span class="line">#</span><br><span class="line"># supervised auto</span><br><span class="line"></span><br><span class="line"># If a pid file is specified, Redis writes it where specified at startup</span><br><span class="line"># and removes it at exit.</span><br><span class="line">#</span><br><span class="line"># When the server runs non daemonized, no pid file is created if none is</span><br><span class="line"># specified in the configuration. When the server is daemonized, the pid file</span><br><span class="line"># is used even if not specified, defaulting to &quot;/var/run/redis.pid&quot;.</span><br><span class="line">#</span><br><span class="line"># Creating a pid file is best effort: if Redis is not able to create it</span><br><span class="line"># nothing bad happens, the server will start and run normally.</span><br><span class="line">#</span><br><span class="line"># Note that on modern Linux systems &quot;/run/redis.pid&quot; is more conforming</span><br><span class="line"># and should be used instead.</span><br><span class="line">pidfile ./redis_6379.pid</span><br><span class="line"></span><br><span class="line"># Specify the server verbosity level.</span><br><span class="line"># This can be one of:</span><br><span class="line"># debug (a lot of information, useful for development/testing)</span><br><span class="line"># verbose (many rarely useful info, but not a mess like the debug level)</span><br><span class="line"># notice (moderately verbose, what you want in production probably)</span><br><span class="line"># warning (only very important / critical messages are logged)</span><br><span class="line"># nothing (nothing is logged)</span><br><span class="line">loglevel notice</span><br><span class="line"></span><br><span class="line"># Specify the log file name. Also the empty string can be used to force</span><br><span class="line"># Redis to log on the standard output. Note that if you use standard</span><br><span class="line"># output for logging but daemonize, logs will be sent to /dev/null</span><br><span class="line">logfile &quot;&quot;</span><br><span class="line"></span><br><span class="line"># To enable logging to the system logger, just set &#x27;syslog-enabled&#x27; to yes,</span><br><span class="line"># and optionally update the other syslog parameters to suit your needs.</span><br><span class="line"># syslog-enabled no</span><br><span class="line"></span><br><span class="line"># Specify the syslog identity.</span><br><span class="line"># syslog-ident redis</span><br><span class="line"></span><br><span class="line"># Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.</span><br><span class="line"># syslog-facility local0</span><br><span class="line"></span><br><span class="line"># To disable the built in crash log, which will possibly produce cleaner core</span><br><span class="line"># dumps when they are needed, uncomment the following:</span><br><span class="line">#</span><br><span class="line"># crash-log-enabled no</span><br><span class="line"></span><br><span class="line"># To disable the fast memory check that&#x27;s run as part of the crash log, which</span><br><span class="line"># will possibly let redis terminate sooner, uncomment the following:</span><br><span class="line">#</span><br><span class="line"># crash-memcheck-enabled no</span><br><span class="line"></span><br><span class="line"># Set the number of databases. The default database is DB 0, you can select</span><br><span class="line"># a different one on a per-connection basis using SELECT &lt;dbid&gt; where</span><br><span class="line"># dbid is a number between 0 and &#x27;databases&#x27;-1</span><br><span class="line">databases 16</span><br><span class="line"></span><br><span class="line"># By default Redis shows an ASCII art logo only when started to log to the</span><br><span class="line"># standard output and if the standard output is a TTY and syslog logging is</span><br><span class="line"># disabled. Basically this means that normally a logo is displayed only in</span><br><span class="line"># interactive sessions.</span><br><span class="line">#</span><br><span class="line"># However it is possible to force the pre-4.0 behavior and always show a</span><br><span class="line"># ASCII art logo in startup logs by setting the following option to yes.</span><br><span class="line">always-show-logo no</span><br><span class="line"></span><br><span class="line"># To avoid logging personal identifiable information (PII) into server log file,</span><br><span class="line"># uncomment the following:</span><br><span class="line">#</span><br><span class="line"># hide-user-data-from-log yes</span><br><span class="line"></span><br><span class="line"># By default, Redis modifies the process title (as seen in &#x27;top&#x27; and &#x27;ps&#x27;) to</span><br><span class="line"># provide some runtime information. It is possible to disable this and leave</span><br><span class="line"># the process name as executed by setting the following to no.</span><br><span class="line">set-proc-title yes</span><br><span class="line"></span><br><span class="line"># When changing the process title, Redis uses the following template to construct</span><br><span class="line"># the modified title.</span><br><span class="line">#</span><br><span class="line"># Template variables are specified in curly brackets. The following variables are</span><br><span class="line"># supported:</span><br><span class="line">#</span><br><span class="line"># &#123;title&#125;           Name of process as executed if parent, or type of child process.</span><br><span class="line"># &#123;listen-addr&#125;     Bind address or &#x27;*&#x27; followed by TCP or TLS port listening on, or</span><br><span class="line">#                   Unix socket if only that&#x27;s available.</span><br><span class="line"># &#123;server-mode&#125;     Special mode, i.e. &quot;[sentinel]&quot; or &quot;[cluster]&quot;.</span><br><span class="line"># &#123;port&#125;            TCP port listening on, or 0.</span><br><span class="line"># &#123;tls-port&#125;        TLS port listening on, or 0.</span><br><span class="line"># &#123;unixsocket&#125;      Unix domain socket listening on, or &quot;&quot;.</span><br><span class="line"># &#123;config-file&#125;     Name of configuration file used.</span><br><span class="line">#</span><br><span class="line">proc-title-template &quot;&#123;title&#125; &#123;listen-addr&#125; &#123;server-mode&#125;&quot;</span><br><span class="line"></span><br><span class="line"># Set the local environment which is used for string comparison operations, and </span><br><span class="line"># also affect the performance of Lua scripts. Empty String indicates the locale </span><br><span class="line"># is derived from the environment variables.</span><br><span class="line">locale-collate &quot;&quot;</span><br></pre></td></tr></table></figure>

<p>rename-command：命令重命名，对于一些危险命令例如：</p>
<p>​	flushdb（清空数据库）</p>
<p>　flushall（清空所有记录）</p>
<p>　config（客户端连接后可配置服务器）</p>
<p>　keys（客户端连接后可查看所有存在的键） </p>
<p>作为服务端redis-server，常常需要禁用以上命令来使得服务器更加安全。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename-command FLUSHALL &quot;&quot;</span><br></pre></td></tr></table></figure>

<p>requirepass:设置redis连接密码</p>
<h4 id="SNAPSHOTTING"><a href="#SNAPSHOTTING" class="headerlink" title="SNAPSHOTTING"></a>SNAPSHOTTING</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">################################ SNAPSHOTTING  ################################</span><br><span class="line"></span><br><span class="line"># Save the DB to disk.</span><br><span class="line">#</span><br><span class="line"># save &lt;seconds&gt; &lt;changes&gt; [&lt;seconds&gt; &lt;changes&gt; ...]</span><br><span class="line">#</span><br><span class="line"># Redis will save the DB if the given number of seconds elapsed and it</span><br><span class="line"># surpassed the given number of write operations against the DB.</span><br><span class="line">#</span><br><span class="line"># Snapshotting can be completely disabled with a single empty string argument</span><br><span class="line"># as in following example:</span><br><span class="line">#</span><br><span class="line"># save &quot;&quot;</span><br><span class="line">#</span><br><span class="line"># Unless specified otherwise, by default Redis will save the DB:</span><br><span class="line">#   * After 3600 seconds (an hour) if at least 1 change was performed</span><br><span class="line">#   * After 300 seconds (5 minutes) if at least 100 changes were performed</span><br><span class="line">#   * After 60 seconds if at least 10000 changes were performed</span><br><span class="line">#</span><br><span class="line"># You can set these explicitly by uncommenting the following line.</span><br><span class="line">#</span><br><span class="line"># save 3600 1 300 100 60 10000</span><br><span class="line"></span><br><span class="line"># By default Redis will stop accepting writes if RDB snapshots are enabled</span><br><span class="line"># (at least one save point) and the latest background save failed.</span><br><span class="line"># This will make the user aware (in a hard way) that data is not persisting</span><br><span class="line"># on disk properly, otherwise chances are that no one will notice and some</span><br><span class="line"># disaster will happen.</span><br><span class="line">#</span><br><span class="line"># If the background saving process will start working again Redis will</span><br><span class="line"># automatically allow writes again.</span><br><span class="line">#</span><br><span class="line"># However if you have setup your proper monitoring of the Redis server</span><br><span class="line"># and persistence, you may want to disable this feature so that Redis will</span><br><span class="line"># continue to work as usual even if there are problems with disk,</span><br><span class="line"># permissions, and so forth.</span><br><span class="line">stop-writes-on-bgsave-error yes</span><br><span class="line"></span><br><span class="line"># Compress string objects using LZF when dump .rdb databases?</span><br><span class="line"># By default compression is enabled as it&#x27;s almost always a win.</span><br><span class="line"># If you want to save some CPU in the saving child set it to &#x27;no&#x27; but</span><br><span class="line"># the dataset will likely be bigger if you have compressible values or keys.</span><br><span class="line">rdbcompression yes</span><br><span class="line"></span><br><span class="line"># Since version 5 of RDB a CRC64 checksum is placed at the end of the file.</span><br><span class="line"># This makes the format more resistant to corruption but there is a performance</span><br><span class="line"># hit to pay (around 10%) when saving and loading RDB files, so you can disable it</span><br><span class="line"># for maximum performances.</span><br><span class="line">#</span><br><span class="line"># RDB files created with checksum disabled have a checksum of zero that will</span><br><span class="line"># tell the loading code to skip the check.</span><br><span class="line">rdbchecksum yes</span><br><span class="line"></span><br><span class="line"># Enables or disables full sanitization checks for ziplist and listpack etc when</span><br><span class="line"># loading an RDB or RESTORE payload. This reduces the chances of a assertion or</span><br><span class="line"># crash later on while processing commands.</span><br><span class="line"># Options:</span><br><span class="line">#   no         - Never perform full sanitization</span><br><span class="line">#   yes        - Always perform full sanitization</span><br><span class="line">#   clients    - Perform full sanitization only for user connections.</span><br><span class="line">#                Excludes: RDB files, RESTORE commands received from the master</span><br><span class="line">#                connection, and client connections which have the</span><br><span class="line">#                skip-sanitize-payload ACL flag.</span><br><span class="line"># The default should be &#x27;clients&#x27; but since it currently affects cluster</span><br><span class="line"># resharding via MIGRATE, it is temporarily set to &#x27;no&#x27; by default.</span><br><span class="line">#</span><br><span class="line"># sanitize-dump-payload no</span><br><span class="line"></span><br><span class="line"># The filename where to dump the DB</span><br><span class="line">dbfilename dump.rdb</span><br><span class="line"></span><br><span class="line"># Remove RDB files used by replication in instances without persistence</span><br><span class="line"># enabled. By default this option is disabled, however there are environments</span><br><span class="line"># where for regulations or other security concerns, RDB files persisted on</span><br><span class="line"># disk by masters in order to feed replicas, or stored on disk by replicas</span><br><span class="line"># in order to load them for the initial synchronization, should be deleted</span><br><span class="line"># ASAP. Note that this option ONLY WORKS in instances that have both AOF</span><br><span class="line"># and RDB persistence disabled, otherwise is completely ignored.</span><br><span class="line">#</span><br><span class="line"># An alternative (and sometimes better) way to obtain the same effect is</span><br><span class="line"># to use diskless replication on both master and replicas instances. However</span><br><span class="line"># in the case of replicas, diskless is not always an option.</span><br><span class="line">rdb-del-sync-files no</span><br><span class="line"></span><br><span class="line"># The working directory.</span><br><span class="line">#</span><br><span class="line"># The DB will be written inside this directory, with the filename specified</span><br><span class="line"># above using the &#x27;dbfilename&#x27; configuration directive.</span><br><span class="line">#</span><br><span class="line"># The Append Only File will also be created inside this directory.</span><br><span class="line">#</span><br><span class="line"># Note that you must specify a directory here, not a file name.</span><br><span class="line">dir ./</span><br></pre></td></tr></table></figure>

<p>持久化RDB设置，控制 Redis 数据快照的保存时机、格式、完整性及存储位置。</p>
<h4 id="REDIS-CLUSTER"><a href="#REDIS-CLUSTER" class="headerlink" title="REDIS CLUSTER"></a>REDIS CLUSTER</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line">################################ REDIS CLUSTER  ###############################</span><br><span class="line"></span><br><span class="line"># Normal Redis instances can&#x27;t be part of a Redis Cluster; only nodes that are</span><br><span class="line"># started as cluster nodes can. In order to start a Redis instance as a</span><br><span class="line"># cluster node enable the cluster support uncommenting the following:</span><br><span class="line">#</span><br><span class="line"># cluster-enabled yes</span><br><span class="line"></span><br><span class="line"># Every cluster node has a cluster configuration file. This file is not</span><br><span class="line"># intended to be edited by hand. It is created and updated by Redis nodes.</span><br><span class="line"># Every Redis Cluster node requires a different cluster configuration file.</span><br><span class="line"># Make sure that instances running in the same system do not have</span><br><span class="line"># overlapping cluster configuration file names.</span><br><span class="line">#</span><br><span class="line"># cluster-config-file nodes-6379.conf</span><br><span class="line"></span><br><span class="line"># Cluster node timeout is the amount of milliseconds a node must be unreachable</span><br><span class="line"># for it to be considered in failure state.</span><br><span class="line"># Most other internal time limits are a multiple of the node timeout.</span><br><span class="line">#</span><br><span class="line"># cluster-node-timeout 15000</span><br><span class="line"></span><br><span class="line"># The cluster port is the port that the cluster bus will listen for inbound connections on. When set </span><br><span class="line"># to the default value, 0, it will be bound to the command port + 10000. Setting this value requires </span><br><span class="line"># you to specify the cluster bus port when executing cluster meet.</span><br><span class="line"># cluster-port 0</span><br><span class="line"></span><br><span class="line"># A replica of a failing master will avoid to start a failover if its data</span><br><span class="line"># looks too old.</span><br><span class="line">#</span><br><span class="line"># There is no simple way for a replica to actually have an exact measure of</span><br><span class="line"># its &quot;data age&quot;, so the following two checks are performed:</span><br><span class="line">#</span><br><span class="line"># 1) If there are multiple replicas able to failover, they exchange messages</span><br><span class="line">#    in order to try to give an advantage to the replica with the best</span><br><span class="line">#    replication offset (more data from the master processed).</span><br><span class="line">#    Replicas will try to get their rank by offset, and apply to the start</span><br><span class="line">#    of the failover a delay proportional to their rank.</span><br><span class="line">#</span><br><span class="line"># 2) Every single replica computes the time of the last interaction with</span><br><span class="line">#    its master. This can be the last ping or command received (if the master</span><br><span class="line">#    is still in the &quot;connected&quot; state), or the time that elapsed since the</span><br><span class="line">#    disconnection with the master (if the replication link is currently down).</span><br><span class="line">#    If the last interaction is too old, the replica will not try to failover</span><br><span class="line">#    at all.</span><br><span class="line">#</span><br><span class="line"># The point &quot;2&quot; can be tuned by user. Specifically a replica will not perform</span><br><span class="line"># the failover if, since the last interaction with the master, the time</span><br><span class="line"># elapsed is greater than:</span><br><span class="line">#</span><br><span class="line">#   (node-timeout * cluster-replica-validity-factor) + repl-ping-replica-period</span><br><span class="line">#</span><br><span class="line"># So for example if node-timeout is 30 seconds, and the cluster-replica-validity-factor</span><br><span class="line"># is 10, and assuming a default repl-ping-replica-period of 10 seconds, the</span><br><span class="line"># replica will not try to failover if it was not able to talk with the master</span><br><span class="line"># for longer than 310 seconds.</span><br><span class="line">#</span><br><span class="line"># A large cluster-replica-validity-factor may allow replicas with too old data to failover</span><br><span class="line"># a master, while a too small value may prevent the cluster from being able to</span><br><span class="line"># elect a replica at all.</span><br><span class="line">#</span><br><span class="line"># For maximum availability, it is possible to set the cluster-replica-validity-factor</span><br><span class="line"># to a value of 0, which means, that replicas will always try to failover the</span><br><span class="line"># master regardless of the last time they interacted with the master.</span><br><span class="line"># (However they&#x27;ll always try to apply a delay proportional to their</span><br><span class="line"># offset rank).</span><br><span class="line">#</span><br><span class="line"># Zero is the only value able to guarantee that when all the partitions heal</span><br><span class="line"># the cluster will always be able to continue.</span><br><span class="line">#</span><br><span class="line"># cluster-replica-validity-factor 10</span><br><span class="line"></span><br><span class="line"># Cluster replicas are able to migrate to orphaned masters, that are masters</span><br><span class="line"># that are left without working replicas. This improves the cluster ability</span><br><span class="line"># to resist to failures as otherwise an orphaned master can&#x27;t be failed over</span><br><span class="line"># in case of failure if it has no working replicas.</span><br><span class="line">#</span><br><span class="line"># Replicas migrate to orphaned masters only if there are still at least a</span><br><span class="line"># given number of other working replicas for their old master. This number</span><br><span class="line"># is the &quot;migration barrier&quot;. A migration barrier of 1 means that a replica</span><br><span class="line"># will migrate only if there is at least 1 other working replica for its master</span><br><span class="line"># and so forth. It usually reflects the number of replicas you want for every</span><br><span class="line"># master in your cluster.</span><br><span class="line">#</span><br><span class="line"># Default is 1 (replicas migrate only if their masters remain with at least</span><br><span class="line"># one replica). To disable migration just set it to a very large value or</span><br><span class="line"># set cluster-allow-replica-migration to &#x27;no&#x27;.</span><br><span class="line"># A value of 0 can be set but is useful only for debugging and dangerous</span><br><span class="line"># in production.</span><br><span class="line">#</span><br><span class="line"># cluster-migration-barrier 1</span><br><span class="line"></span><br><span class="line"># Turning off this option allows to use less automatic cluster configuration.</span><br><span class="line"># It both disables migration to orphaned masters and migration from masters</span><br><span class="line"># that became empty.</span><br><span class="line">#</span><br><span class="line"># Default is &#x27;yes&#x27; (allow automatic migrations).</span><br><span class="line">#</span><br><span class="line"># cluster-allow-replica-migration yes</span><br><span class="line"></span><br><span class="line"># By default Redis Cluster nodes stop accepting queries if they detect there</span><br><span class="line"># is at least a hash slot uncovered (no available node is serving it).</span><br><span class="line"># This way if the cluster is partially down (for example a range of hash slots</span><br><span class="line"># are no longer covered) all the cluster becomes, eventually, unavailable.</span><br><span class="line"># It automatically returns available as soon as all the slots are covered again.</span><br><span class="line">#</span><br><span class="line"># However sometimes you want the subset of the cluster which is working,</span><br><span class="line"># to continue to accept queries for the part of the key space that is still</span><br><span class="line"># covered. In order to do so, just set the cluster-require-full-coverage</span><br><span class="line"># option to no.</span><br><span class="line">#</span><br><span class="line"># cluster-require-full-coverage yes</span><br><span class="line"></span><br><span class="line"># This option, when set to yes, prevents replicas from trying to failover its</span><br><span class="line"># master during master failures. However the replica can still perform a</span><br><span class="line"># manual failover, if forced to do so.</span><br><span class="line">#</span><br><span class="line"># This is useful in different scenarios, especially in the case of multiple</span><br><span class="line"># data center operations, where we want one side to never be promoted if not</span><br><span class="line"># in the case of a total DC failure.</span><br><span class="line">#</span><br><span class="line"># cluster-replica-no-failover no</span><br><span class="line"></span><br><span class="line"># This option, when set to yes, allows nodes to serve read traffic while the</span><br><span class="line"># cluster is in a down state, as long as it believes it owns the slots.</span><br><span class="line">#</span><br><span class="line"># This is useful for two cases.  The first case is for when an application</span><br><span class="line"># doesn&#x27;t require consistency of data during node failures or network partitions.</span><br><span class="line"># One example of this is a cache, where as long as the node has the data it</span><br><span class="line"># should be able to serve it.</span><br><span class="line">#</span><br><span class="line"># The second use case is for configurations that don&#x27;t meet the recommended</span><br><span class="line"># three shards but want to enable cluster mode and scale later. A</span><br><span class="line"># master outage in a 1 or 2 shard configuration causes a read/write outage to the</span><br><span class="line"># entire cluster without this option set, with it set there is only a write outage.</span><br><span class="line"># Without a quorum of masters, slot ownership will not change automatically.</span><br><span class="line">#</span><br><span class="line"># cluster-allow-reads-when-down no</span><br><span class="line"></span><br><span class="line"># This option, when set to yes, allows nodes to serve pubsub shard traffic while</span><br><span class="line"># the cluster is in a down state, as long as it believes it owns the slots.</span><br><span class="line">#</span><br><span class="line"># This is useful if the application would like to use the pubsub feature even when</span><br><span class="line"># the cluster global stable state is not OK. If the application wants to make sure only</span><br><span class="line"># one shard is serving a given channel, this feature should be kept as yes.</span><br><span class="line">#</span><br><span class="line"># cluster-allow-pubsubshard-when-down yes</span><br><span class="line"></span><br><span class="line"># Cluster link send buffer limit is the limit on the memory usage of an individual</span><br><span class="line"># cluster bus link&#x27;s send buffer in bytes. Cluster links would be freed if they exceed</span><br><span class="line"># this limit. This is to primarily prevent send buffers from growing unbounded on links</span><br><span class="line"># toward slow peers (E.g. PubSub messages being piled up).</span><br><span class="line"># This limit is disabled by default. Enable this limit when &#x27;mem_cluster_links&#x27; INFO field</span><br><span class="line"># and/or &#x27;send-buffer-allocated&#x27; entries in the &#x27;CLUSTER LINKS` command output continuously increase.</span><br><span class="line"># Minimum limit of 1gb is recommended so that cluster link buffer can fit in at least a single</span><br><span class="line"># PubSub message by default. (client-query-buffer-limit default value is 1gb)</span><br><span class="line">#</span><br><span class="line"># cluster-link-sendbuf-limit 0</span><br><span class="line"> </span><br><span class="line"># Clusters can configure their announced hostname using this config. This is a common use case for </span><br><span class="line"># applications that need to use TLS Server Name Indication (SNI) or dealing with DNS based</span><br><span class="line"># routing. By default this value is only shown as additional metadata in the CLUSTER SLOTS</span><br><span class="line"># command, but can be changed using &#x27;cluster-preferred-endpoint-type&#x27; config. This value is </span><br><span class="line"># communicated along the clusterbus to all nodes, setting it to an empty string will remove </span><br><span class="line"># the hostname and also propagate the removal.</span><br><span class="line">#</span><br><span class="line"># cluster-announce-hostname &quot;&quot;</span><br><span class="line"></span><br><span class="line"># Clusters can configure an optional nodename to be used in addition to the node ID for</span><br><span class="line"># debugging and admin information. This name is broadcasted between nodes, so will be used</span><br><span class="line"># in addition to the node ID when reporting cross node events such as node failures.</span><br><span class="line"># cluster-announce-human-nodename &quot;&quot;</span><br><span class="line"></span><br><span class="line"># Clusters can advertise how clients should connect to them using either their IP address,</span><br><span class="line"># a user defined hostname, or by declaring they have no endpoint. Which endpoint is</span><br><span class="line"># shown as the preferred endpoint is set by using the cluster-preferred-endpoint-type</span><br><span class="line"># config with values &#x27;ip&#x27;, &#x27;hostname&#x27;, or &#x27;unknown-endpoint&#x27;. This value controls how</span><br><span class="line"># the endpoint returned for MOVED/ASKING requests as well as the first field of CLUSTER SLOTS. </span><br><span class="line"># If the preferred endpoint type is set to hostname, but no announced hostname is set, a &#x27;?&#x27; </span><br><span class="line"># will be returned instead.</span><br><span class="line">#</span><br><span class="line"># When a cluster advertises itself as having an unknown endpoint, it&#x27;s indicating that</span><br><span class="line"># the server doesn&#x27;t know how clients can reach the cluster. This can happen in certain </span><br><span class="line"># networking situations where there are multiple possible routes to the node, and the </span><br><span class="line"># server doesn&#x27;t know which one the client took. In this case, the server is expecting</span><br><span class="line"># the client to reach out on the same endpoint it used for making the last request, but use</span><br><span class="line"># the port provided in the response.</span><br><span class="line">#</span><br><span class="line"># cluster-preferred-endpoint-type ip</span><br><span class="line"></span><br><span class="line"># This configuration defines the sampling ratio (0-100) for checking command</span><br><span class="line"># compatibility in cluster mode. When a command is executed, it is sampled at</span><br><span class="line"># the specified ratio to determine if it complies with Redis cluster constraints,</span><br><span class="line"># such as cross-slot restrictions.</span><br><span class="line">#</span><br><span class="line"># - A value of 0 means no commands are sampled for compatibility checks.</span><br><span class="line"># - A value of 100 means all commands are checked.</span><br><span class="line"># - Intermediate values (e.g., 10) mean that approximately 10% of the commands</span><br><span class="line">#   are randomly selected for compatibility verification.</span><br><span class="line">#</span><br><span class="line"># Higher sampling ratios may introduce additional performance overhead, especially</span><br><span class="line"># under high QPS. The default value is 0 (no sampling).</span><br><span class="line">#</span><br><span class="line"># cluster-compatibility-sample-ratio 0</span><br><span class="line"></span><br><span class="line"># In order to setup your cluster make sure to read the documentation</span><br><span class="line"># available at https://redis.io web site.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这段配置是 Redis 的集群（Cluster）模式设置，用于构建一个分布式 Redis 集群，实现数据分片、高可用和自动故障转移。以下是关键配置项的简要说明：</p>
<p>cluster-enabled yes：启用集群模式。<br>cluster-config-file nodes-6379.conf：集群节点的配置文件，由 Redis 自动生成管理。<br>cluster-node-timeout 15000：节点不可达多少毫秒后认为该节点失败。</p>
<p>cluster-replica-validity-factor 10：控制从节点是否可以发起故障转移，值越大越宽松。<br>cluster-migration-barrier 1：主节点至少保留几个从节点后，才允许迁移去填补孤儿主节点。<br>cluster-allow-replica-migration yes：是否允许从节点自动迁移到孤儿主节点。</p>
<p>cluster-require-full-coverage yes：如果部分哈希槽未覆盖，是否停止接受请求。<br>cluster-replica-no-failover no：是否禁止从节点在主节点故障时自动故障转移。<br>cluster-allow-reads-when-down no：集群部分宕机时，是否允许读操作。<br>cluster-allow-pubsubshard-when-down no：是否允许在集群异常时继续使用 Pub&#x2F;Sub 分片功能。</p>
<p>cluster-port 0：集群总线监听端口，默认为命令端口 + 10000。<br>cluster-announce-hostname “”：对外宣布的主机名（如用于 TLS&#x2F;SNI）。<br>cluster-announce-human-nodename “”：节点可读名称，方便管理和调试。<br>cluster-preferred-endpoint-type ip：客户端连接使用的地址类型（ip &#x2F; hostname &#x2F; unknown）。</p>
<p>cluster-link-sendbuf-limit 0：限制集群节点间发送缓冲区大小，防止内存溢出。<br>cluster-command-check-ratio 0：检查命令兼容性的采样比例，用于控制跨槽命令行为。</p>
<p>这段配置用于启用并定制 Redis 集群模式，控制节点通信、故障转移、可用性策略及客户端连接方式，实现 Redis 数据的分布式存储与高可用。</p>
<p>用于启用并定制 Redis 集群模式，控制节点通信、故障转移、可用性策略及客户端连接方式，实现 Redis 数据的分布式存储与高可用。</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/redis/">redis</a></div><div class="post-share"><div class="social-share" data-image="https://pic.crazytaxii.com/Redis_Logo.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://bbs.mcrail.top/media/1399b5f3-2a9b-4bd3-80d0-395306938838/mm_facetoface_collect_qrcode_1746424034929.png" target="_blank"><img class="post-qr-code-img" src="https://bbs.mcrail.top/media/1399b5f3-2a9b-4bd3-80d0-395306938838/mm_facetoface_collect_qrcode_1746424034929.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://bbs.mcrail.top/media/7b00d720-54ff-4511-82af-2b5e1da0a65f/1746424012275.jpg" target="_blank"><img class="post-qr-code-img" src="https://bbs.mcrail.top/media/7b00d720-54ff-4511-82af-2b5e1da0a65f/1746424012275.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/05/15/redis%E7%9A%84%E5%AE%89%E8%A3%85/" title="redis的安装"><img class="cover" src="https://pic.crazytaxii.com/Redis_Logo.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">redis的安装</div></div><div class="info-2"><div class="info-item-1">安装直链（v8.0.1-最新版本）于昨日更新最新版本 windows开箱即用： https://github.com/redis-windows/redis-windows/releases/download/8.0.1/Redis-8.0.1-Windows-x64-cygwin-with-Service.zip https://github.com/redis-windows/redis-windows/releases/download/8.0.1/Redis-8.0.1-Windows-x64-msys2-with-Service.zip linux直接下载安装指令: 1wget...</div></div></div></a><a class="pagination-related" href="/2025/05/25/redis%E5%91%BD%E4%BB%A4/" title="redis命令"><img class="cover" src="https://pic.crazytaxii.com/Redis_Logo.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">redis命令</div></div><div class="info-2"><div class="info-item-1">Redis的命令双击start.bat启动服务端，双击redis-cil.exe启动命令客户端，命令一般在在客户端进行。 使用ping指令查看服务是不是在线，出现PONG即为正常  键（KEY）命令基本格式：指令 + 关键字 其中指令是不区分大小写的，而关键字需要区分大小写，在表格后会说明原因。    序号 命令及描述    1 DEL key 该命令用于在 key 存在时删除 key。   2 DUMP key 序列化给定 key ，并返回被序列化的值。   3 EXISTS key 检查给定 key 是否存在。   4 EXPIRE key seconds 为给定 key 设置过期时间，以秒为单位计算。   5 EXPIREAT key timestamp  EXPIREAT 的作用和 EXPIRE 类似，都用于为 key 设置过期时间。 不同在于 EXPIREAT 命令接受的时间参数是 UNIX 时间戳(unix timestamp)。   6 PEXPIRE key milliseconds设置 key 的过期时间以毫秒计。   7 PEXPIREAT key...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/05/07/redis%E5%9F%BA%E7%A1%80/" title="redis基础知识"><img class="cover" src="https://pic.crazytaxii.com/Redis_Logo.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-07</div><div class="info-item-2">redis基础知识</div></div><div class="info-2"><div class="info-item-1">什么是redis？  Redis:REmote DIctionary Server(远程字典服务)。由意大利人Salvatore...</div></div></div></a><a class="pagination-related" href="/2025/05/15/redis%E7%9A%84%E5%AE%89%E8%A3%85/" title="redis的安装"><img class="cover" src="https://pic.crazytaxii.com/Redis_Logo.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-15</div><div class="info-item-2">redis的安装</div></div><div class="info-2"><div class="info-item-1">安装直链（v8.0.1-最新版本）于昨日更新最新版本 windows开箱即用： https://github.com/redis-windows/redis-windows/releases/download/8.0.1/Redis-8.0.1-Windows-x64-cygwin-with-Service.zip https://github.com/redis-windows/redis-windows/releases/download/8.0.1/Redis-8.0.1-Windows-x64-msys2-with-Service.zip linux直接下载安装指令: 1wget...</div></div></div></a><a class="pagination-related" href="/2025/05/25/redis%E5%91%BD%E4%BB%A4/" title="redis命令"><img class="cover" src="https://pic.crazytaxii.com/Redis_Logo.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-25</div><div class="info-item-2">redis命令</div></div><div class="info-2"><div class="info-item-1">Redis的命令双击start.bat启动服务端，双击redis-cil.exe启动命令客户端，命令一般在在客户端进行。 使用ping指令查看服务是不是在线，出现PONG即为正常  键（KEY）命令基本格式：指令 + 关键字 其中指令是不区分大小写的，而关键字需要区分大小写，在表格后会说明原因。    序号 命令及描述    1 DEL key 该命令用于在 key 存在时删除 key。   2 DUMP key 序列化给定 key ，并返回被序列化的值。   3 EXISTS key 检查给定 key 是否存在。   4 EXPIRE key seconds 为给定 key 设置过期时间，以秒为单位计算。   5 EXPIREAT key timestamp  EXPIREAT 的作用和 EXPIRE 类似，都用于为 key 设置过期时间。 不同在于 EXPIREAT 命令接受的时间参数是 UNIX 时间戳(unix timestamp)。   6 PEXPIRE key milliseconds设置 key 的过期时间以毫秒计。   7 PEXPIREAT key...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://bbs.mcrail.top/media/d5a8ebf1-1b7c-483e-84e2-8452b7cb786a/new.gif" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">ZuiLiu</div><div class="author-info-description">编程/自媒体/音乐/美术</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ZuiLiuaB"><i class="fab fa-github"></i><span>关注我的github</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/ZuiLiuaB" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/weixin_73079022" target="_blank" title="CSDN"><i class="fa fa-book-open"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=2706610584&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="mailto:2706610584@qq.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎！,背景：綿野レモンT</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.</span> <span class="toc-text">Redis的配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E8%AF%BB"><span class="toc-number">2.</span> <span class="toc-text">配置文件解读</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#configuration-file"><span class="toc-number">2.1.</span> <span class="toc-text">configuration file</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#INCLUDES"><span class="toc-number">2.2.</span> <span class="toc-text">INCLUDES</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MODULES"><span class="toc-number">2.3.</span> <span class="toc-text">MODULES</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NETWORK"><span class="toc-number">2.4.</span> <span class="toc-text">NETWORK</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TLS-SSL"><span class="toc-number">2.5.</span> <span class="toc-text">TLS&#x2F;SSL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GENERAL"><span class="toc-number">2.6.</span> <span class="toc-text">GENERAL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SNAPSHOTTING"><span class="toc-number">2.7.</span> <span class="toc-text">SNAPSHOTTING</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#REDIS-CLUSTER"><span class="toc-number">2.8.</span> <span class="toc-text">REDIS CLUSTER</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/05/25/redis%E5%91%BD%E4%BB%A4/" title="redis命令"><img src="https://pic.crazytaxii.com/Redis_Logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="redis命令"/></a><div class="content"><a class="title" href="/2025/05/25/redis%E5%91%BD%E4%BB%A4/" title="redis命令">redis命令</a><time datetime="2025-05-25T13:00:00.000Z" title="发表于 2025-05-25 21:00:00">2025-05-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/18/redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" title="redis的配置文件"><img src="https://pic.crazytaxii.com/Redis_Logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="redis的配置文件"/></a><div class="content"><a class="title" href="/2025/05/18/redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" title="redis的配置文件">redis的配置文件</a><time datetime="2025-05-17T16:00:00.000Z" title="发表于 2025-05-18 00:00:00">2025-05-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/15/redis%E7%9A%84%E5%AE%89%E8%A3%85/" title="redis的安装"><img src="https://pic.crazytaxii.com/Redis_Logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="redis的安装"/></a><div class="content"><a class="title" href="/2025/05/15/redis%E7%9A%84%E5%AE%89%E8%A3%85/" title="redis的安装">redis的安装</a><time datetime="2025-05-15T12:00:00.000Z" title="发表于 2025-05-15 20:00:00">2025-05-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/13/Docker%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" title="Docker常见报错-Windows"><img src="https://bbs.mcrail.top/media/71bebcac-c81f-42b5-b8a9-1c2004947a48/image.png##" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker常见报错-Windows"/></a><div class="content"><a class="title" href="/2025/05/13/Docker%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" title="Docker常见报错-Windows">Docker常见报错-Windows</a><time datetime="2025-05-13T14:12:10.000Z" title="发表于 2025-05-13 22:12:10">2025-05-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/09/Nginx%E7%9A%84tcp-udp%E4%BB%A3%E7%90%86/" title="Nginx的tcp-udp代理"><img src="https://img.picui.cn/free/2025/05/05/681867cba8ef1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx的tcp-udp代理"/></a><div class="content"><a class="title" href="/2025/05/09/Nginx%E7%9A%84tcp-udp%E4%BB%A3%E7%90%86/" title="Nginx的tcp-udp代理">Nginx的tcp-udp代理</a><time datetime="2025-05-09T12:07:00.000Z" title="发表于 2025-05-09 20:07:00">2025-05-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2025 By ZuiLiu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>